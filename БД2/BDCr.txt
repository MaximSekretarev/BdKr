CREATE TABLE Spetsialnost
(
id INT PRIMARY KEY IDENTITY NOT NULL,
nazvaniye VARCHAR(120) NOT NULL,
kod VARCHAR(20) UNIQUE NOT NULL
);

CREATE TABLE Dolzhnost
(
id INT PRIMARY KEY IDENTITY NOT NULL,
name_dolzhnost VARCHAR(MAX) NOT NULL
);

CREATE TABLE Sotrudnik
(
id INT PRIMARY KEY IDENTITY NOT NULL,
imya VARCHAR(80) NOT NULL,
familiya VARCHAR(80) NOT NULL,
otchestvo VARCHAR(80) NULL,
email VARCHAR(150) NULL,
telefon VARCHAR(12) NULL,
data_rozhdeniya DATE NULL,
id_dolzhnost INT NULL,
FOREIGN KEY (id_dolzhnost) REFERENCES Dolzhnost (id) ON DELETE SET NULL ON UPDATE CASCADE
);

CREATE TABLE Gruppa
(
id INT PRIMARY KEY IDENTITY NOT NULL,
id_spetsialnost INT NOT NULL,
id_kurator INT NULL,
kurs INT NOT NULL,
name_gruppa VARCHAR(60) NOT NULL,
FOREIGN KEY (id_spetsialnost) REFERENCES Spetsialnost (id) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (id_kurator) REFERENCES Sotrudnik (id) ON DELETE SET NULL ON UPDATE CASCADE
);

CREATE TABLE SemeynoyePolozheniye
(
id INT PRIMARY KEY IDENTITY NOT NULL,
vid VARCHAR(60) NOT NULL,
opisaniye VARCHAR(MAX) NULL
);

CREATE TABLE Student
(
id INT PRIMARY KEY IDENTITY NOT NULL,
imya VARCHAR(80) NOT NULL,
familiya VARCHAR(80) NOT NULL,
otchestvo VARCHAR(80) NULL,
mesto_prozhivaniye VARCHAR(200) NULL,
student_number VARCHAR(10) NOT NULL,
email VARCHAR(150) NULL,
telefon VARCHAR(12) NULL,
data_rozhdeniya DATE NOT NULL,
id_gruppa INT NOT NULL,
id_semeynoye_polozheniye INT NULL,
FOREIGN KEY (id_gruppa) REFERENCES Gruppa (id) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (id_semeynoye_polozheniye) REFERENCES SemeynoyePolozheniye (id) ON DELETE SET NULL ON UPDATE CASCADE
);

CREATE TABLE FormaObucheniya
(
id INT PRIMARY KEY IDENTITY NOT NULL,
forma_obucheniya VARCHAR(20) NOT NULL,
);

CREATE TABLE FormaObucheniyaStudent
(
id INT PRIMARY KEY IDENTITY NOT NULL,
id_student INT UNIQUE NOT NULL,
id_forma_obucheniya NULL,
oplata FLOAT NULL,
sostoyaniye VARCHAR(10) NULL,
FOREIGN KEY (id_student) REFERENCES Student (id) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (id_forma_obucheniya) REFERENCES FormaObucheniya (id) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Zanyatost
(
id INT PRIMARY KEY IDENTITY NOT NULL,
opisaniye VARCHAR(MAX) NOT NULL,
id_student INT NOT NULL,
FOREIGN KEY (id_student) REFERENCES Student (id) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Invalidnost
(
id INT PRIMARY KEY IDENTITY NOT NULL,
id_student INT UNIQUE NOT NULL,
status_invalidnost CHAR(1) NOT NULL,
opisaniye VARCHAR(MAX) NULL,
FOREIGN KEY (id_student) REFERENCES Student (id) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Predmet
(
id INT PRIMARY KEY IDENTITY NOT NULL,
nazvaniye VARCHAR(400) NOT NULL
);

CREATE TABLE PredmetGruppa
(
id INT PRIMARY KEY IDENTITY NOT NULL,
id_gruppa INT NOT NULL,
id_predmet INT NOT NULL,
id_prepodavatel INT NULL,
vremya VARCHAR(20) NOT NULL
FOREIGN KEY (id_gruppa) REFERENCES Gruppa (id) ON DELETE CASCADE ON UPDATE NO ACTION,
FOREIGN KEY (id_predmet) REFERENCES Predmet (id) ON DELETE CASCADE ON UPDATE NO ACTION,
FOREIGN KEY (id_prepodavatel) REFERENCES Sotrudnik (id) ON DELETE SET NULL ON UPDATE NO ACTION
);

CREATE TABLE Zanyatiye
(
id INT PRIMARY KEY IDENTITY NOT NULL,
id_predmet INT NOT NULL,
data_zanyatiye DATE NOT NULL,
kabinet VARCHAR(10) NULL,
FOREIGN KEY (id_predmet) REFERENCES PredmetGruppa (id) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Otsenka
(
id INT PRIMARY KEY IDENTITY NOT NULL,
id_student INT NOT NULL,
id_zanyatiye INT NOT NULL,
otsenka INT NULL,
FOREIGN KEY (id_student) REFERENCES Student (id) ON DELETE NO ACTION ON UPDATE NO ACTION,
FOREIGN KEY (id_zanyatiye) REFERENCES Zanyatiye (id) ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE Poseshcheniye
(
id INT PRIMARY KEY IDENTITY NOT NULL,
id_student INT NOT NULL,
id_zanyatiye INT NOT NULL,
poseshcheniye VARCHAR(10) NULL,
FOREIGN KEY (id_student) REFERENCES Student (id) ON DELETE NO ACTION ON UPDATE NO ACTION,
FOREIGN KEY (id_zanyatiye) REFERENCES Zanyatiye (id) ON DELETE NO ACTION ON UPDATE NO ACTION
);

